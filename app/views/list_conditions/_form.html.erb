<%= form_with model: @condition, url: @condition.persisted? ? list_condition_path(@list, @condition) : list_conditions_path(@list), html: { 'x-show' => "subject == 'start_date'" } do |f| %>
  <%= f.hidden_field :subject, value: 'start_date' %>

  <div class="px-4 py-5 sm:p-6" x-data="{ condition: '<%= @condition.condition || 'is_a_timestamp' %>', valuePrefix: '<%= @condition.value_prefix || 'relative_date' %>' }">
    <%= f.select :condition, ListCondition::CONDITIONS.select { |(k, _)| k.start_with?('is_a_timestamp') }.to_a.map(&:reverse), {}, class: 'inline-block py-2 pl-3 pr-10 text-base border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm', 'x-on:change' => 'condition = $el.value' %>

    <%= f.select :value_prefix, ListCondition::VALUE_PREFIXES.to_a.map(&:reverse), {}, class: 'inline-block py-2 pl-3 pr-10 text-base border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm', 'x-on:change' => 'valuePrefix = $el.value', 'x-show' => "condition != 'is_a_timestamp'" %>

    <%= f.text_field :value_from, class: 'shadow-sm focus:ring-indigo-500 focus:border-indigo-500 inline-block sm:text-sm border-gray-300 rounded-md', 'x-show' => "condition == 'is_a_timestamp_between'" %>
    <span id="value_description" x-show="condition == 'is_a_timestamp_between'">to</span>
    <%= f.text_field :value_to, class: 'shadow-sm focus:ring-indigo-500 focus:border-indigo-500 inline-block sm:text-sm border-gray-300 rounded-md', 'x-show' => "condition == 'is_a_timestamp_between'" %>

    <%= f.text_field :value, class: 'shadow-sm focus:ring-indigo-500 focus:border-indigo-500 inline-block sm:text-sm border-gray-300 rounded-md', 'x-show' => "condition != 'is_a_timestamp_between' && condition != 'is_a_timestamp' && condition != 'is_a_timestamp_between'" %>

    <span id="value_description" x-show="valuePrefix == 'relative_date' && condition != 'is_a_timestamp'">days</span>

    <%= f.select :value_suffix, ListCondition::VALUE_SUFFIXES.to_a.map(&:reverse), {}, class: 'inline-block py-2 pl-3 pr-10 text-base border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm', 'x-show' => "valuePrefix == 'relative_date' && condition != 'is_a_timestamp'" %>
  </div>
  <div class="px-4 py-4 bg-gray-50 sm:px-6">
    <div class="text-right">

      <%= link_to 'Cancel', list_path(@list), class: 'bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500' %>
      <%= f.submit 'Save', class: 'inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500' %>
    </div>
  </div>
<% end %>

<%= form_with model: @condition, url: @condition.persisted? ? list_condition_path(@list, @condition) : list_conditions_path(@list), html: { 'x-show' => "subject == 'character_name'" } do |f| %>
  <%= f.hidden_field :subject, value: 'character_name' %>

  <div class="px-4 py-5 sm:p-6">
    <%= f.select :condition, ListCondition::CONDITIONS.reject { |(k, _)| k.start_with?('is_a_timestamp') }.to_a.map(&:reverse), {}, class: 'inline-block py-2 pl-3 pr-10 text-base border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm' %>

    <%= f.text_field :value, class: 'shadow-sm focus:ring-indigo-500 focus:border-indigo-500 inline-block sm:text-sm border-gray-300 rounded-md', placeholder: 'Value' %>
  </div>
  <div class="px-4 py-4 bg-gray-50 sm:px-6">
    <div class="text-right">

      <%= link_to 'Cancel', list_path(@list), class: 'bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500' %>
      <%= f.submit 'Save', class: 'inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500' %>
    </div>
  </div>
<% end %>
